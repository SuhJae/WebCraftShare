import{d as P,r as a,a as n,b as e,t as _,e as C,u as E,f as p,w as $,g as f,v as g,F as M,_ as R,i as S,o as r,j as T,k as L}from"./XMarkIcon-00ce67d5.js";const N={key:0,class:"model fixed inset-0 flex items-start justify-center pt-20"},j={class:"model__content p-6 glass-morphic-window w-96 absolute top-1/5 left-1/2 transform -translate-x-1/2"},U={class:"model__header flex justify-between items-center mb-4"},V={class:"model__title text-2xl font-semibold"},F={class:"model__body"},I=["innerHTML"],z={class:"relative top-40"},B={class:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8"},D={class:"sm:mx-auto sm:w-full sm:max-w-sm"},O={key:0,class:"mx-auto h-10 w-auto",src:R,alt:"Organization logo dark version"},q={key:1,class:"mx-auto h-10 w-auto",src:S,alt:"Organization logo"},H=e("h2",{class:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight"},"Rest your password",-1),A={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},K=["onSubmit"],Y=e("label",{for:"password",class:"block text-sm font-medium leading-6"},"New Password",-1),G={class:"mt-2"},J={key:0,class:"text-red-600 dark:text-red-400"},Q={class:"mt-2"},W={key:0,class:"text-red-600 dark:text-red-400"},X=["disabled"],Z=P({__name:"forgot",setup(ee){const b=a(""),m=a(!1),d=a(!1),h=a(""),v=a(""),w=a(""),l=a(""),i=a(""),c=a("");function u(s,t){h.value=s,v.value=t,d.value=!0}window.addEventListener("keydown",s=>{s.key==="Escape"&&(d.value=!1)});function x(s){return s===""?"":s.length<8?"Password must be at least 8 characters!":/^[a-z0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/? ]+$/i.test(s)?/\d/.test(s)?"valid":"Password must contain at least one number!":"Password must be alphanumeric with special characters!"}async function k(){try{const t=await(await fetch("/auth/reset",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`token=${encodeURIComponent(w.value)}&password=${encodeURIComponent(l.value)}`})).json();if(t.success){u("Success","");let o=5;const y=window.setInterval(()=>{o-=.1,o=parseFloat(o.toFixed(1)),o<=0?(clearInterval(y),window.location.href="/"):v.value=`Your password has been reset! Redirecting you to <a href="/home/">home</a> in ${o}s...`},100)}else u("Error",t.message)}catch{u("Error","Something went wrong!")}}return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",s=>{m.value=s.matches}),window.addEventListener("load",()=>{m.value=window.matchMedia("(prefers-color-scheme: dark)").matches,b.value=window.location.origin;const s=new URLSearchParams(window.location.search);w.value=s.get("token")||"",w.value===""&&u("Error","No token provided!")}),(s,t)=>(r(),n(M,null,[d.value?(r(),n("div",N,[e("div",{class:"absolute inset-0 bg-white bg-opacity-50 dark:bg-black dark:bg-opacity-50 backdrop-blur-sm",onClick:t[0]||(t[0]=o=>d.value=!1)}),e("div",j,[e("div",U,[e("h2",V,_(h.value),1),e("button",{class:"model__close p-1 hover:bg-slate-200 dark:hover:bg-slate-600 rounded",onClick:t[1]||(t[1]=o=>d.value=!1)},[C(E(T),{class:"h-6 w-6"})])]),e("div",F,[e("div",{innerHTML:v.value},null,8,I)])])])):p("",!0),e("div",z,[e("div",B,[e("div",D,[m.value?(r(),n("img",O)):(r(),n("img",q)),H]),e("div",A,[e("form",{class:"space-y-6",onSubmit:$(k,["prevent"])},[e("div",null,[Y,e("div",G,[f(e("input",{autocomplete:"new-password",placeholder:"Choose your password","onUpdate:modelValue":t[2]||(t[2]=o=>l.value=o),required:!0,type:"password",onKeyup:t[3]||(t[3]=o=>i.value=x(l.value)),class:"global-input"},null,544),[[g,l.value]]),i.value!=="valid"?(r(),n("small",J,_(i.value),1)):p("",!0)]),e("div",Q,[f(e("input",{autocomplete:"new-password",placeholder:"Confirm your password","onUpdate:modelValue":t[4]||(t[4]=o=>c.value=o),required:!0,type:"password",class:"global-input"},null,512),[[g,c.value]]),l.value!==c.value&&i.value=="valid"?(r(),n("small",W," Password does not match! ")):p("",!0)])]),e("div",null,[e("button",{type:"submit",disabled:l.value!==c.value||i.value!=="valid",class:"big-green-button"}," Reset Password ",8,X)])],40,K)])])])],64))}});L(Z).mount("#app");
