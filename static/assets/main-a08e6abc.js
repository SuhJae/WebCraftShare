import{d as W,r as l,c as G,a as o,b as e,t as n,e as N,u as V,f as r,w as j,g as d,v as u,h as T,F as J,_ as Q,i as X,o as i,j as M,k as Z}from"./XMarkIcon-24b34893.js";const ee={key:0,class:"model fixed inset-0 flex items-start justify-center pt-20"},te={class:"model__content p-6 glass-morphic-window w-96 absolute top-1/5 left-1/2 transform -translate-x-1/2"},se={class:"model__header flex justify-between items-center mb-4"},ae={class:"model__title text-2xl font-semibold"},le={class:"model__body"},oe=["innerHTML"],ie={key:1,class:"dialog fixed inset-0 flex items-start justify-center pt-20"},ne={class:"model__content p-6 glass-morphic-window w-96 absolute top-1/5 left-1/2 transform -translate-x-1/2"},re={class:"dialog__header flex justify-between items-center mb-4"},de=e("h2",{class:"dialog__title text-2xl font-semibold"}," Password recovery ",-1),ue={class:"dialog__body"},ce=["onSubmit"],me=e("label",{for:"email",class:"block text-sm font-medium leading-6"},"Email address",-1),ve={class:"mt-2"},pe={key:0,class:"text-red-600 dark:text-red-400"},_e=["disabled"],he={key:2,class:"dialog fixed inset-0 flex items-start justify-center pt-20"},fe={class:"model__content p-6 glass-morphic-window w-96 absolute top-1/5 left-1/2 transform -translate-x-1/2"},ge={class:"dialog__header flex justify-between items-center mb-4"},be=e("h2",{class:"dialog__title text-2xl font-semibold"}," Sign Up ",-1),we={class:"dialog__body"},ye=["onSubmit"],ke=e("label",{for:"email",class:"block text-sm font-medium leading-6"},"Email address",-1),xe={class:"mt-2"},$e={key:0,class:"text-red-600 dark:text-red-400"},Ee=e("label",{for:"username",class:"block text-sm font-medium leading-6"},"Nickname",-1),Se={class:"mt-2"},Ce={key:0,class:"text-red-600 dark:text-red-400"},Ue={key:1},Pe=e("small",{class:"text-green-600 dark:text-green-400"}," Your websites will be hosted at: ",-1),Ne={class:"hover"},Ve=e("label",{for:"password",class:"block text-sm font-medium leading-6"},"Password",-1),je={class:"mt-2"},Te={key:0,class:"text-red-600 dark:text-red-400"},Me={class:"mt-2"},qe={key:0,class:"text-red-600 dark:text-red-400"},Ke=["disabled"],Le={class:"relative top-40"},Re={class:"flex min-h-full flex-1 flex-col justify-center px-6 py-12 lg:px-8"},ze={class:"sm:mx-auto sm:w-full sm:max-w-sm"},De={key:0,class:"mx-auto h-10 w-auto",src:Q,alt:"Organization logo dark version"},Ie={key:1,class:"mx-auto h-10 w-auto",src:X,alt:"Organization logo"},Be=e("h2",{class:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight"},"Sign in to your account",-1),Fe={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},Oe=["onSubmit"],He=e("label",{for:"email",class:"block text-sm font-medium leading-6"},"Email address",-1),Ye={class:"mt-2"},Ae={key:0,class:"text-red-600 dark:text-red-400"},We={class:"flex items-center justify-between"},Ge=e("label",{for:"password",class:"block text-sm font-medium leading-6"},"Password",-1),Je={class:"text-sm"},Qe={class:"mt-2"},Xe=["disabled"],Ze={key:0,class:"text-red-600 dark:text-red-400"},et={class:"mt-10 text-center text-sm"},tt=W({__name:"index",setup(st){const q=l(""),S=l(!1),m=l(!1),K=l("Dialog title"),L=l('This is a <u>dialog</u> You can use it to display relevant information to the user. This is a <a href="https://google.com">URL</a>'),x=l(""),v=l(""),p=l(""),R=l("KIS"),z=l("kis.ac"),_=l(!1),h=l(""),$=l(""),f=l(!1),g=l(""),E=l(""),b=l(""),w=l(""),c=l(""),y=l(""),k=l(""),D=l(!1),C=l("");function U(a,t){K.value=a,L.value=t,m.value=!0}window.addEventListener("keydown",a=>{a.key==="Escape"&&(m.value=!1)});function P(a){const t=/\S+@\S+\.\S+/,s=new RegExp(`@${z.value}$`);return a===""?"":t.test(a)?s.test(a)?"valid":`Please enter a ${R.value} (${z.value}) email!`:"Please enter a valid email!"}async function I(a){return a===""?"":a.length<3?"Nickname must be at least 3 characters!":a.length>20?"Nickname must be less than 20 characters!":/^[a-z0-9]+$/i.test(a)?(b.value="checking . . .",(await(await fetch(`/api/users?userName=${a}`)).json()).exists?"Nickname already exists!":"valid"):"Nickname must be alphanumeric!"}async function B(){b.value=await I(w.value)}function F(a){return a===""?"":a.length<8?"Password must be at least 8 characters!":/^[a-z0-9!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/? ]+$/i.test(a)?/\d/.test(a)?"valid":"Password must contain at least one number!":"Password must be alphanumeric with special characters!"}async function O(){console.log(`Email: ${v.value}`),console.log(`Password: ${p.value}`),D.value=!0;try{const t=await(await fetch("/auth/authenticate",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:`username=${encodeURIComponent(v.value)}&password=${encodeURIComponent(p.value)}`})).json();t.success?window.location.href="/home/":C.value=t.message}catch{U("Communication Error","Error occurred while communicating to the server while logging in. Please try again.")}finally{D.value=!1}}function H(){console.log(`Email: ${h.value}`),_.value=!1,h.value="",U("Check your email!","If the email you entered is valid, you will receive an email with a link to reset your password.")}function Y(){U("Check your email!",`We have sent you an email to verify your email address (${g.value}). Please click the link in the email to verify your email address.`),f.value=!1,g.value="",w.value="",c.value="",k.value=""}window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",a=>{S.value=a.matches}),window.addEventListener("load",()=>{S.value=window.matchMedia("(prefers-color-scheme: dark)").matches,q.value=window.location.origin});const A=G(()=>E.value==="valid"&&b.value==="valid"&&y.value==="valid"&&c.value===k.value);return(a,t)=>(i(),o(J,null,[m.value?(i(),o("div",ee,[e("div",{class:"absolute inset-0 bg-white bg-opacity-50 dark:bg-black dark:bg-opacity-50 backdrop-blur-sm",onClick:t[0]||(t[0]=s=>m.value=!1)}),e("div",te,[e("div",se,[e("h2",ae,n(K.value),1),e("button",{class:"model__close p-1 hover:bg-slate-200 dark:hover:bg-slate-600 rounded",onClick:t[1]||(t[1]=s=>m.value=!1)},[N(V(M),{class:"h-6 w-6"})])]),e("div",le,[e("div",{innerHTML:L.value},null,8,oe)])])])):r("",!0),_.value?(i(),o("div",ie,[e("div",{class:"absolute inset-0 bg-white bg-opacity-50 dark:bg-black dark:bg-opacity-50 backdrop-blur-sm",onClick:t[2]||(t[2]=s=>_.value=!1)}),e("div",ne,[e("div",re,[de,e("button",{class:"dialog__close p-1 hover:bg-slate-200 dark:hover:bg-slate-600 rounded",onClick:t[3]||(t[3]=s=>_.value=!1)},[N(V(M),{class:"h-6 w-6"})])]),e("div",ue,[e("form",{class:"space-y-6",onSubmit:j(H,["prevent"])},[e("div",null,[me,e("div",ve,[d(e("input",{autocomplete:"email",placeholder:"Enter your email","onUpdate:modelValue":t[4]||(t[4]=s=>h.value=s),required:!0,onKeyup:t[5]||(t[5]=s=>$.value=P(h.value)),class:"glass-morphic-input"},null,544),[[u,h.value]]),$.value!=="valid"?(i(),o("small",pe,n($.value),1)):r("",!0)])]),e("div",null,[e("button",{type:"submit",disabled:$.value!=="valid",class:"big-green-button"},"Send email",8,_e)])],40,ce)])])])):r("",!0),f.value?(i(),o("div",he,[e("div",{class:"absolute inset-0 bg-white bg-opacity-50 dark:bg-black dark:bg-opacity-50 backdrop-blur-sm",onClick:t[6]||(t[6]=s=>f.value=!1)}),e("div",fe,[e("div",ge,[be,e("button",{class:"dialog__close p-1 hover:bg-slate-200 dark:hover:bg-slate-600 rounded",onClick:t[7]||(t[7]=s=>f.value=!1)},[N(V(M),{class:"h-6 w-6"})])]),e("div",we,[e("form",{class:"space-y-6",onSubmit:j(Y,["prevent"])},[e("div",null,[ke,e("div",xe,[d(e("input",{autocomplete:"email",placeholder:"Enter your email","onUpdate:modelValue":t[8]||(t[8]=s=>g.value=s),required:!0,type:"email",onKeyup:t[9]||(t[9]=s=>E.value=P(g.value)),class:"glass-morphic-input"},null,544),[[u,g.value]]),E.value!=="valid"?(i(),o("small",$e,n(E.value),1)):r("",!0)])]),e("div",null,[Ee,e("div",Se,[d(e("input",{autocomplete:"username",placeholder:"Choose your nickname","onUpdate:modelValue":t[10]||(t[10]=s=>w.value=s),required:!0,type:"text",onKeyup:B,class:"glass-morphic-input"},null,544),[[u,w.value]]),b.value!=="valid"?(i(),o("small",Ce,n(b.value),1)):(i(),o("div",Ue,[Pe,T(),e("small",null,[e("a",Ne,n(q.value)+"/"+n(w.value)+"/",1)])]))])]),e("div",null,[Ve,e("div",je,[d(e("input",{autocomplete:"new-password",placeholder:"Choose your password","onUpdate:modelValue":t[11]||(t[11]=s=>c.value=s),required:!0,type:"password",onKeyup:t[12]||(t[12]=s=>y.value=F(c.value)),class:"glass-morphic-input"},null,544),[[u,c.value]]),y.value!=="valid"?(i(),o("small",Te,n(y.value),1)):r("",!0)]),e("div",Me,[d(e("input",{autocomplete:"new-password",placeholder:"Confirm your password","onUpdate:modelValue":t[13]||(t[13]=s=>k.value=s),required:!0,type:"password",class:"glass-morphic-input"},null,512),[[u,k.value]]),c.value!==k.value&&y.value=="valid"?(i(),o("small",qe," Password does not match! ")):r("",!0)])]),e("div",null,[e("button",{type:"submit",disabled:!A.value,class:"big-green-button"},"Submit",8,Ke)])],40,ye)])])])):r("",!0),e("div",Le,[e("div",Re,[e("div",ze,[S.value?(i(),o("img",De)):(i(),o("img",Ie)),Be]),e("div",Fe,[e("form",{class:"space-y-6",onSubmit:j(O,["prevent"])},[e("div",null,[He,e("div",Ye,[d(e("input",{autocomplete:"email",placeholder:"Enter your email","onUpdate:modelValue":t[14]||(t[14]=s=>v.value=s),required:!0,type:"email",onKeyup:t[15]||(t[15]=s=>x.value=P(v.value)),class:"global-input"},null,544),[[u,v.value]]),x.value!=="valid"?(i(),o("small",Ae,n(x.value),1)):r("",!0)])]),e("div",null,[e("div",We,[Ge,e("div",Je,[e("a",{href:"#",onClick:t[16]||(t[16]=s=>_.value=!0)},"Forgot password?")])]),e("div",Qe,[d(e("input",{id:"password",name:"password",type:"password",autocomplete:"current-password","onUpdate:modelValue":t[17]||(t[17]=s=>p.value=s),required:!0,placeholder:"Enter your password",class:"global-input"},null,512),[[u,p.value]])])]),e("div",null,[e("button",{type:"submit",disabled:x.value!=="valid"||p.value==="",class:"big-green-button"}," Sign in",8,Xe),C.value?(i(),o("small",Ze,n(C.value),1)):r("",!0)])],40,Oe),e("p",et,[T(" Not a member? "),e("a",{href:"#",onClick:t[18]||(t[18]=s=>f.value=!0)},"Sign up"),T(" with your "+n(R.value)+" email! ",1)])])])])],64))}});Z(tt).mount("#app");
